{# ---------------------------------------------------------------------------
   File: templates/annotate.html
--------------------------------------------------------------------------- #}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Pull Tailwind utilities via CDN so nothing breaks if the build pipeline isn’t running -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Optional tiny add-on: zebra stripes, sticky headers, etc. -->
  <link rel="stylesheet" href="/static/css/annotations.css" />
  <link rel="stylesheet" href="/static/css/main.css" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  

  <link rel="icon" href="/static/icon.png" />
  <title>Annotate – {{ license_name }}</title>
</head>

<body class="bg-[#021027] text-white h-screen overflow-hidden">

  <!-- ─────────────── Layout wrapper ─────────────── -->
  <div class="flex h-full">

    <!-- ─────────────── Left sidebar ─────────────── -->
    <aside class="bg-[#202123]/50 w-1/5 flex flex-col">
      <!-- Logo -->
      <div class="flex items-center space-x-4 px-4 py-3">
        <img src="/static/icon.png" alt="Logo" class="h-8 w-8" />
        <span class="font-bold text-2xl">ILAIx</span>
      </div>

      <!-- New Chat -->
      <button
        onclick="location.href='/'"
        class="mt-4 mx-4 flex items-center space-x-2 border border-white rounded-md px-5 py-2 hover:opacity-80">
        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24"
             stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        <span>New&nbsp;Chat</span>
      </button>

      <span class="mt-6 mb-2 px-6 text-sm text-gray-400">Annotations</span>

      <!-- Label palette -->
      <div id="labelList" class="flex-1 overflow-y-auto px-3 space-y-2 pb-6">
        {% for lab in ordered_labels %}
          {% set is_selected = lab in predicted_labels %}
          {% set is_done     = lab in explanations %}
          <label
            class="flex items-center justify-between bg-[#002744]/60 px-3 py-2 rounded-md
                   hover:bg-[#002743]/80 cursor-pointer"
            data-label="{{ lab }}"
            data-done="{{ '1' if is_done else '0' }}">
            <div class="flex items-center space-x-2">
              <input type="checkbox"
                     class="h-4 w-4 shrink-0 accent-indigo-500 rounded"
                     {% if is_selected %}checked{% endif %} />
              <span class="text-sm">{{ lab }}</span>
            </div>
          </label>
        {% endfor %}
      </div>

      <div class="mt-auto mb-6 flex justify-center">
        <button
          onclick="location.href='/admin/logout'"
          class="flex w-[90%] items-center gap-2 rounded-md border border-white px-5 py-2 hover:opacity-80">
          <!-- logout icon -->
          <svg viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
              stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
            <polyline points="16 17 21 12 16 7" />
            <line x1="21" y1="12" x2="9" y2="12" />
          </svg>
          <span>Logout</span>
        </button>
      </div>
    </aside>

    <!-- ─────────────── Right workspace ─────────────── -->
    <main class="flex-1 flex flex-col h-full">

      <!-- Top bar -->
      <div class="flex items-center w-full px-6 py-4">
        <button onclick="window.location.href='/annotations'"
                class="px-5 py-2 rounded-md flex items-center space-x-2 bg-[#002743] hover:bg-gray-500">
          <span class="material-symbols-outlined text-lg">arrow_back</span>
          <span>Back</span>
        </button>

        <!-- Save on the far right -->
        <button id="saveBtn"
                class="ml-auto px-5 py-2 rounded-md flex items-center space-x-2 bg-[#002743] hover:bg-gray-500">
          <span class="material-symbols-outlined text-lg">save</span>
          <span>Save</span>
        </button>
      </div>

      <!-- Scrollable license text -->
      <section id="textPane"
               class="flex-1 mx-auto w-4/5 overflow-y-auto py-8 space-y-6 leading-relaxed">
        {{ full_text }}
      </section>

      <!-- Footer notice -->
      <footer class="text-xs text-gray-300 py-3 pl-10">
        Public Restricted Area – please don’t forget to save changes.
        Issues? <a href="#" class="underline">Contact&nbsp;Form</a>
      </footer>
    </main>
  </div>

    <div class="container">
        <!-- We'll generate circles dynamically -->
        <div id="circleContainer"></div>
    </div>
  <!-- Data blob for JS -->
  <script id="initialData" type="application/json">
    {
      "license_name": {{ license_name | tojson }},
      "explanations": {{ explanations | tojson }}
    }
  </script>
  <script src="/static/js/script_annotate.js"></script>
</body>
</html>
