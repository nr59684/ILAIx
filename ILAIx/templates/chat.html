<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind utilities via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Optional polish (sticky headers, zebra stripes, hide scroll-bars) -->
  <link rel="stylesheet" href="/static/css/main.css" />

  <link rel="icon" href="/static/icon.png" />
  <title>{{ result.license_name }}</title>
</head>

<body class="bg-[#021027] text-white h-screen overflow-hidden">

  <div class="flex h-full">
    <!-- ═══════════════ Left sidebar ═══════════════ -->
    <aside class="bg-[#202123]/50 flex flex-col">
      <!-- Logo -->
      <div class="flex items-center space-x-4 px-4 py-3">
        <img src="/static/icon.png" alt="Logo" class="h-8 w-8">
        <span class="font-bold text-2xl">ILAIx</span>
      </div>

      <!-- New chat -->
      <button
        onclick="location.href='/'"
        class="mt-4 mx-4 flex items-center space-x-2 border border-white rounded-md px-5 py-2 hover:opacity-80">
        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24"
             stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        <span>New&nbsp;Chat</span>
      </button>

      <button
        onclick="location.href='/annotations'"
        class="mx-4 my-2 flex items-center gap-2 rounded-md border border-white px-5 py-2 hover:opacity-80">
        <!-- pencil-ruler icon -->
        <svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
          <path d="M16 2l6 6-9 9H7v-6l9-9z"></path>
          <path d="M7 17l-4 4"></path>
        </svg>
        <span>Admin</span>
      </button>
      
      <span class="mt-6 mb-2 px-6 text-sm text-gray-400">History</span>
      

      <!-- Chat history -->
      <div class="flex-1 overflow-y-auto px-3 space-y-2 pb-6">
        {% for chat in result.mychats %}
          <button
            class="flex items-center space-x-2 w-full bg-[#002744]/60 hover:bg-[#002743] px-4 py-2 rounded-md"
            onclick="location.href='/chat/{{ chat.license_name }}';">
            <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24"
                 stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <span>{{ chat.license_name }}</span>
          </button>
        {% endfor %}
      </div>
    </aside>

    <!-- ═══════════════ Right pane ═══════════════ -->
    <main class="flex-1 flex flex-col h-full">
      <!-- Top bar (model + Explain) -->
      <div class="flex items-center w-full px-6 py-4">
        <div class="bg-[#002744] px-4 py-2 rounded-md">
          {{ result.result.model }}
        </div>

        <button id="explainButton"
                class="px-5 py-2 ml-auto rounded-md bg-indigo-600 hover:bg-indigo-500">
          Explain
        </button>
      </div>

      <!-- Q / A bubbles -->
      <section class="flex flex-col items-center space-y-0.5 overflow-y-auto flex-1 pb-14">
        <!-- Question -->
        <div class="flex w-4/5 max-w-3xl items-start space-x-4 py-7">
          <img src="/static/user.png" alt="User" class="h-9 w-9">
          <div id="question2">{{ result.result.question }}</div>
        </div>

        <!-- Answer -->
        <div class="w-full bg-[#002743]/60 py-7 flex justify-center">
          <div class="flex w-4/5 max-w-3xl items-start space-x-4">
            <img src="/static/icon.png" alt="Bot" class="h-9 w-9">
            <div id="solution" class="space-y-4">{{ result.result.answer | safe }}</div>
          </div>
        </div>
      </section>

      <!-- Message box -->
      <form id="messageForm" class="hidden py-6 flex items-center space-x-4">
        <input id="questionInput"
               class="flex-1 rounded-md bg-[#002743] p-4 focus:outline-none"
               placeholder="Send a message…" type="text" autocomplete="off" />

        <button id="sendButton"
                class="flex items-center justify-center w-10 h-10 hover:opacity-80">
          <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24"
               stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
          </svg>
        </button>
      </form>

      <!-- Footer notice -->
      <footer class="text-xs text-gray-300 pb-3 text-center">
        Internal development — FOSSBert may produce inaccurate information.
        <a href="#" class="underline">Nilesh&nbsp;Rijhwani&nbsp;(IL/CDI)</a>
      </footer>
    </main>
  </div>

  <!-- Optional animated background -->
  <div class="container">
        <!-- We'll generate circles dynamically -->
        <div id="circleContainer"></div>
  </div>

  <script src="/static/js/script_chat.js"></script>
</body>
</html>
